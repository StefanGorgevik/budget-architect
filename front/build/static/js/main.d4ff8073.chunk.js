(this.webpackJsonpfront=this.webpackJsonpfront||[]).push([[0],[,,,,,,,,,,,function(e,t,a){},,,,,,,,,,,,,,,,function(e,t,a){e.exports=a(86)},,,,,function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},,,,,,,function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},,,,,,,,,,,,,,,,,,function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),o=a(13),c=a.n(o),l=(a(32),a(33),a(9)),u=a(1),i=a(4),s=a(5),d=a(7),p=a(6),m=(a(34),a(35),a(2));a(11),a(42),a(43);var g=function(e){return n.a.createElement("label",{className:"input-label",htmlFor:e.id},e.label)};var h=function(e){return n.a.createElement("div",{className:"text-input-div"},n.a.createElement(g,{id:e.id,label:e.label}),n.a.createElement("input",{type:"text",onChange:e.saveValue,className:"inputs",id:e.id,placeholder:e.placeholder,value:e.value}))};a(44);var E=function(e){return n.a.createElement("div",null,n.a.createElement(g,{id:e.id,label:e.label}),n.a.createElement("input",{onChange:e.saveValue,className:"inputs",type:"date",id:e.id,value:e.value?e.value.toString().slice(0,10):"",min:"2020-01-01",max:"2020-12-31"}))};a(45);var f=function(e){return n.a.createElement("div",{className:"number-input-div"},n.a.createElement(g,{id:e.id,label:e.label}),n.a.createElement("input",{onChange:e.saveValue,className:"inputs",type:"number",id:e.id,value:e.value,required:!0}))};a(46);var v=function(e){return n.a.createElement("button",{onClick:e.click,id:"button",className:e.name},e.content)};var b=Object(m.b)((function(e){return{types:e.budgetCalcTypes}}))((function(e){return n.a.createElement("form",{onSubmit:e.saveProduct,className:"budget-calc-inputs"},n.a.createElement("div",{className:"bcalc-bigger-inputs"},n.a.createElement(h,{saveValue:e.handleInputValue,label:"name",id:"name",placeholder:"product name",value:e.product.name}),n.a.createElement(E,{saveValue:e.handleInputValue,label:"date",id:"date",placeholder:"product date",value:e.product.date}),n.a.createElement(h,{saveValue:e.handleInputValue,label:"type",id:"type",placeholder:"product type",value:e.product.type})),n.a.createElement("div",{className:"bcalc-smaller-inputs"},n.a.createElement(f,{saveValue:e.handleInputValue,label:"price",id:"price",placeholder:"price",value:e.product.price}),n.a.createElement(f,{saveValue:e.handleInputValue,label:"quantity",id:"quantity",placeholder:"quantity",value:e.product.quantity})),e.editClicked?n.a.createElement(v,{click:e.editProduct,content:"Save",name:"products-submit-btn"}):n.a.createElement(v,{click:e.saveProduct,content:"Submit",name:"products-submit-btn"}))}));a(47);function S(e){return{type:"GET_GROUPS",payload:e}}function C(e){return{type:"ADD_NEW_GROUP_CLICKED",payload:e}}function y(e){return{type:"IS_GROUP_SAVED",payload:e}}function P(e){return{type:"GROUP_TO_EDIT",payload:e}}function k(e){return{type:"EDIT_GROUP_CLICKED",payload:e}}a(48),a(49);var G=function(e){var t,a=e.mode;return t="groups"===a?["date","totalPrice"]:["name","type","price","quantity","date"],n.a.createElement("div",{className:"select-sort-div"},n.a.createElement("select",{id:"sort",className:"type-select",onChange:e.selectSort},n.a.createElement("option",{value:"default"},"Select sort ","products"===a?"ascending":"descending"),t.map((function(e,t){return n.a.createElement("option",{key:"sort".concat(t),value:e},e)}))))};var N=function(e){return n.a.createElement("div",{className:"table-tools-content"},n.a.createElement("h1",null,"Tools"),n.a.createElement("div",{className:"filter-div"},n.a.createElement(G,{selectSort:e.selectSort,sorts:e.sorts,mode:e.mode})),n.a.createElement(v,{click:e.addNewGroupClicked,content:"Add a new group of products",name:"table-tools-btn"}))},O=function(e){Object(d.a)(a,e);var t=Object(p.a)(a);function a(e){var r;return Object(i.a)(this,a),(r=t.call(this,e)).handleHover=function(){r.setState({hovered:!0})},r.handleHoverLeave=function(){r.setState({hovered:!1})},r.state={hovered:!1},r}return Object(s.a)(a,[{key:"render",value:function(){return n.a.createElement(n.a.Fragment,null,n.a.createElement("div",{className:this.state.hovered?"table-tools-div table-tools-div-active":"table-tools-div",onMouseEnter:this.handleHover,onMouseLeave:this.handleHoverLeave},this.state.hovered?n.a.createElement(N,{selectSort:this.props.selectSort,addNewGroupClicked:this.props.addNewGroupClicked,mode:this.props.mode}):n.a.createElement("div",{className:"before-hover-div"},n.a.createElement("p",null,n.a.createElement("i",{className:"fas fa-tools"})))))}}]),a}(n.a.Component);var I=Object(m.b)(null,(function(e){return{addNewGroupClicked:function(t){return e(C(t))}}}))(O);a(50),a(51);var w=function(e){var t=[];return e.products&&(t=e.products.map((function(t,a){return n.a.createElement("tr",{key:t+a,className:"product-tr"},n.a.createElement("td",null,t.name),n.a.createElement("td",null,t.type),n.a.createElement("td",{className:"number-td"},t.quantity>=1?t.price*t.quantity:t.price,t.quantity>=1?n.a.createElement("span",null,"("+t.price+")"):null),n.a.createElement("td",{className:"number-td"},t.quantity),n.a.createElement("td",null,t.date.toString().slice(0,10)),n.a.createElement("td",{id:"edit-td"},n.a.createElement(v,{click:function(){return e.productToEdit(t)},content:"Edit",name:e.editClicked?"budg-edit-btn budg-edit-btn-disabled":"budg-edit-btn"})),n.a.createElement("td",{id:"edit-td"},n.a.createElement(v,{click:function(){return e.productToDelete(t._id)},content:"Delete",name:"budg-edit-btn"})))}))),n.a.createElement("tbody",null,t)};a(52);var A=function(e){return n.a.createElement("div",{className:"top-table"},n.a.createElement("ul",null,n.a.createElement("li",{id:"name-li"},"Name"),n.a.createElement("li",{id:"type-li"},"Type"),n.a.createElement("li",{id:"price-li"},"Price"),n.a.createElement("li",{id:"quantity-li"},"Quantity"),n.a.createElement("li",{id:"date-li"},"Date")))},T=a(3),j=a.n(T);function D(e){return{type:"GET_PRODUCTS",payload:e}}function H(e){return{type:"IS_PRODUCT_SAVED",payload:e}}function _(e){return{type:"ACCOUNT_CLICKED",payload:e}}function R(e){return{type:"SIGN_IN_CLICKED",payload:e}}function V(e){return{type:"SIGN_OUT_CLICKED",payload:e}}a(70);var U=function(e){return n.a.createElement("main",{className:"err-alert-main"},n.a.createElement("div",{className:"err-alert-div"},n.a.createElement("h1",null,"Error"),n.a.createElement("p",null,e.text),n.a.createElement(v,{click:e.accept,name:"ng-btn",content:"OK"}),e.show?n.a.createElement(v,{click:e.decline,name:"ng-btn",content:"CLOSE"}):null))};a(71);var L=function(){return n.a.createElement("div",{className:"lds-facebook"},n.a.createElement("div",null),n.a.createElement("div",null),n.a.createElement("div",null))},q=function(e){Object(d.a)(a,e);var t=Object(p.a)(a);function a(e){var r;return Object(i.a)(this,a),(r=t.call(this,e)).deleteProductClicked=function(e){r.setState({deleteProductClicked:!0,productToDelete:e})},r.deleteProduct=function(){if(r.state.productToDelete){var e=r.state.productToDelete;j.a.delete("".concat("https://budgetarchitect.herokuapp.com/","app/v1/products/").concat(e),{headers:{Authorization:"Bearer ".concat(localStorage.getItem("jwt"))}}).then((function(t){r.props.deleteProduct(e),r.setState({deleteProductClicked:!1,productToDelete:""})})).catch((function(e){console.log(e)}))}},r.closeAlert=function(){r.setState({deleteProductClicked:!1})},r.state={deleteProductClicked:!1,productToDelete:""},r}return Object(s.a)(a,[{key:"componentDidUpdate",value:function(){this.props.isProductSaved&&(this.props.getAllProducts(),this.props.isProductSavedAction(!1))}},{key:"render",value:function(){return n.a.createElement("div",{className:"table-div"},this.state.deleteProductClicked?n.a.createElement(U,{accept:this.deleteProduct,decline:this.closeAlert,text:"You are about to delete a product. Are you sure?",show:!0}):null,this.props.productsLoaded?0!==this.props.products.length?n.a.createElement(n.a.Fragment,null,n.a.createElement(A,{properties:this.props.properties}),n.a.createElement("div",{className:"products-div"},n.a.createElement("table",{className:"budg-table"},n.a.createElement(w,{products:this.props.products,productToEdit:this.props.productToEdit,productToDelete:this.deleteProductClicked,handleCheckboxChange:this.props.handleCheckboxChange,editClicked:this.props.editClicked})))):n.a.createElement("h1",{className:"table-h1"},"No products found. Please create a product!"):n.a.createElement(L,null))}}]),a}(n.a.Component);var M=Object(m.b)((function(e){return{isProductSaved:e.productsReducer.isProductSaved}}),(function(e){return{getProducts:function(t){return e(D(t))},deleteProduct:function(t){return e(function(e){return{type:"DELETE_PRODUCT",payload:e}}(t))},signInClickedAction:function(t){return e(R(t))},isProductSavedAction:function(t){return e(H(t))}}}))(q);a(72),a(73),a(74),a(75);var F=function(e){return n.a.createElement("main",{className:"ng-info-main"},n.a.createElement("p",null,"Number of products: ",n.a.createElement("span",null,e.productsLength)),n.a.createElement("p",null,"Total price: ",n.a.createElement("span",null,e.totalPrice)))};var x=Object(m.b)((function(e){return{mode:e.groupsReducer.mode,addNewGroupClicked:e.groupsReducer.addNewGroupClicked}}))((function(e){if(e.products)var t=e.products,a=e.products.map((function(t,a){return n.a.createElement("tr",{key:t.name+a,className:"ng-new-prod-tr"},n.a.createElement("td",{className:"ng-new-prod-td"},t.name),n.a.createElement("td",{className:"ng-new-prod-td"},0!==t.quantity?t.price*t.quantity:t.price,0!==t.quantity?n.a.createElement("span",null,"("+t.price+")"):null),n.a.createElement("td",{className:"ng-new-prod-td"},t.quantity),e.addNewGroupClicked?n.a.createElement("td",{className:"x-td",onClick:function(){return e.removeProductFromGroup(t.id)}},"X"):null)}));return n.a.createElement(n.a.Fragment,null,n.a.createElement(F,{productsLength:t?t.length:null,totalPrice:e.totalPrice}),n.a.createElement("table",{className:"ng-table"},n.a.createElement("thead",null,n.a.createElement("tr",null,n.a.createElement("th",null,"Name"),n.a.createElement("th",null,"Price"),n.a.createElement("th",null,"Quantity"),e.addNewGroupClicked?n.a.createElement("th",null):null)),n.a.createElement("tbody",{className:"ng-table-body"},a)))}));var B=function(e){var t=0;return e.products&&(t=e.products.length),n.a.createElement("div",{className:"sg-main"},n.a.createElement("div",{className:"sg-div"},0!==t?n.a.createElement(n.a.Fragment,null,n.a.createElement("h1",null,"Products"),n.a.createElement(x,{products:e.products,totalPrice:e.totalPrice})," "):n.a.createElement("h2",null,"Select a group"),n.a.createElement("div",{className:"sg-btn-div"},n.a.createElement(v,{click:e.closeSelectedGroup,content:"Close",name:"ng-btn"}),n.a.createElement(v,{click:function(){return e.editGroup(e.selectedGroup)},content:"Edit",name:"ng-btn"}))))},z=(a(76),function(e){Object(d.a)(a,e);var t=Object(p.a)(a);function a(e){var r;return Object(i.a)(this,a),(r=t.call(this,e)).state={groupsLoaded:!1},r}return Object(s.a)(a,[{key:"componentDidUpdate",value:function(){this.props.isGroupSaved&&(this.props.getAllGroups(),this.props.isGroupSavedAction(!1))}},{key:"render",value:function(){var e=this,t=0,a=[];return this.props.groups&&(t=this.props.groups.length,a=this.props.groups.map((function(t,a){return n.a.createElement("tr",{key:t+a,className:"group-tr"},n.a.createElement("td",null,t.date.toString().slice(0,10)),n.a.createElement("td",null,t.totalPrice),n.a.createElement("td",{id:"edit-td"},n.a.createElement(v,{click:function(){return e.props.selectedGroupHandler(t)},content:"Open",name:"budg-edit-btn budg-dlt-btn"})),n.a.createElement("td",{id:"edit-td"},n.a.createElement(v,{click:function(){return e.props.editGroupHandler(t)},content:"Edit",name:"budg-edit-btn budg-dlt-btn"})),n.a.createElement("td",{id:"edit-td"},n.a.createElement(v,{click:function(){return e.props.deleteGroupHandler(t)},content:"Delete",name:"budg-edit-btn budg-dlt-btn"})))}))),n.a.createElement("div",null,this.props.groupsLoaded?0!==t?n.a.createElement("table",{className:"groups-table"},n.a.createElement("thead",null,n.a.createElement("tr",null,n.a.createElement("th",null,"Date"),n.a.createElement("th",null,"Total Price"),n.a.createElement("th",null,"Products"),n.a.createElement("th",null),n.a.createElement("th",null),n.a.createElement("th",null))),n.a.createElement("tbody",null,a)):n.a.createElement("h1",{className:"table-h1"},"No groups found. Please create a groups of products!"):n.a.createElement(L,null))}}]),a}(n.a.Component));var K=Object(m.b)((function(e){return{groups:e.groupsReducer.groups,isGroupSaved:e.groupsReducer.isGroupSaved}}),(function(e){return{getGroupsAction:function(t){return e(S(t))},isGroupSavedAction:function(t){return e(y(t))}}}))(z),Y=function(e){Object(d.a)(a,e);var t=Object(p.a)(a);function a(e){var r;return Object(i.a)(this,a),(r=t.call(this,e)).selectedGroupHandler=function(e){r.setState({selectedGroup:e,selectedProducts:e.products,groupSelected:!0})},r.addNewGroupHandler=function(){r.props.addNewGroupClicked(!r.state.addNewGroupClicked)},r.deleteGroupHandler=function(e){r.setState({groupToDelete:e,deleteClicked:!0})},r.acceptDelete=function(){j.a.delete("".concat("https://budgetarchitect.herokuapp.com/","app/v1/groups/").concat(r.state.groupToDelete._id),{headers:{Authorization:"Bearer ".concat(localStorage.getItem("jwt"))}}).then((function(e){r.props.deleteGroup(r.state.groupToDelete),r.setState({deleteClicked:!1,selected:[]})})).catch((function(e){console.log(e)}))},r.closeAlert=function(){r.setState({deleteClicked:!1})},r.closeSelectedGroupHandler=function(){r.setState({groupSelected:!1})},r.editGroupHandler=function(e){r.props.groupToEditAction(e),r.props.editGroupClickedAction(!0),r.props.addNewGroupClicked(!0),r.setState({groupSelected:!1})},r.state={selectedGroup:[],selectedProducts:[],groupSelected:!1,deleteClicked:!1,groupToDelete:null,addNewGroupClicked:!1},r}return Object(s.a)(a,[{key:"render",value:function(){if(this.state.selectedProducts)for(var e=this.state.selectedProducts,t=0,a=0;a<e.length;a++)e[a].quantity>1?t+=e[a].quantity*Number(e[a].price):e[a].quantity<2&&(t+=Number(e[a].price));return n.a.createElement("main",{className:"groups-main"},this.state.deleteClicked?n.a.createElement(U,{accept:this.acceptDelete,decline:this.closeAlert,text:"You are about to delete a group of products. Are you sure?",show:!0}):null,this.state.groupSelected?n.a.createElement(B,{products:this.state.selectedProducts,selectedGroup:this.state.selectedGroup,totalPrice:t,addNewGroupHandler:this.addNewGroupHandler,closeSelectedGroup:this.closeSelectedGroupHandler,editGroup:this.editGroupHandler}):null,n.a.createElement(v,{click:this.addNewGroupHandler,content:"Add a new group of products",name:"table-tools-btn add-group-btn"}),n.a.createElement("div",{className:"groups-content"},n.a.createElement("div",{className:"groups-div"},n.a.createElement(K,{groups:this.props.groups,selectedGroupHandler:this.selectedGroupHandler,deleteGroupHandler:this.deleteGroupHandler,editGroupHandler:this.editGroupHandler,totalPrice:t,groupsLoaded:this.props.groupsLoaded,getAllGroups:this.props.getAllGroups}))))}}]),a}(n.a.Component);var J=Object(m.b)((function(e){return{groups:e.groupsReducer.groups}}),(function(e){return{addNewGroupClicked:function(t){return e(C(t))},deleteGroup:function(t){return e(function(e){return{type:"DELETE_GROUP",payload:e}}(t))},groupToEditAction:function(t){return e(P(t))},editGroupClickedAction:function(t){return e(k(t))}}}))(Y);a(77),a(78);var W=function(e){return n.a.createElement("div",{className:"select-div"},n.a.createElement("select",{name:"select",className:"select",onChange:e.selectOption,value:e.selectedMonth},"month"===e.label?n.a.createElement("option",{className:"option",value:"default",defaultChecked:!0},"All items"):null,e.options.map((function(e,t){return n.a.createElement("option",{className:"option",key:"option".concat(t),value:t},e)}))))};var Q=function(e){var t=(new Date).getFullYear(),a=Array.from(new Array(1),(function(e,a){return a+t})).reverse(),r=localStorage.getItem("income")-e.totalPrice-e.groupsTotalPrice;return n.a.createElement("main",{className:"head-info-main"},n.a.createElement("div",{className:"total-info-div"},n.a.createElement("p",{className:"head-info-p budget-p"},"Monthly Budget ",n.a.createElement("span",null,localStorage.getItem("income"))),e.isMonthSelected?n.a.createElement("p",{className:"head-info-p remaining-p"},"Remaining ",n.a.createElement("span",null,r)):null),n.a.createElement("div",{className:"products-info-div"},n.a.createElement("p",{className:"head-info-p"},"Price ",n.a.createElement("span",null,e.totalPrice)),n.a.createElement("p",{className:"head-info-p"},"Products",n.a.createElement("span",null,e.productsLength))),n.a.createElement("div",{className:"groups-info-div"},n.a.createElement("p",{className:"head-info-p groups-p"},"Groups",n.a.createElement("span",null,e.groupsLength)),n.a.createElement("p",{className:"head-info-p"},"Products",n.a.createElement("span",null,e.groupsProductsNumber)),n.a.createElement("p",{className:"head-info-p"},"Price",n.a.createElement("span",null,e.groupsTotalPrice))),n.a.createElement("div",{className:"table-info-selects"},n.a.createElement("p",{className:"label-p"},"Filter: "),n.a.createElement(W,{options:["January","February","March","April","May","June","July","August","September","October","November","December"],selectOption:e.selectFilter,selectedMonth:e.selectedMonth,label:"month",value:e.selectedMonth}),n.a.createElement(W,{options:a,selectOption:e.selectFilter,selectedMonth:e.selectedMonth,label:"year"})),n.a.createElement(v,{click:e.getAll,content:"See all",name:"table-info-btn"}))};a(79),a(80);var X=function(e){return n.a.createElement("form",{className:"ng-form",onSubmit:e.addProductToGroup},n.a.createElement("div",{className:"ng-date-div"},n.a.createElement(E,{saveValue:e.handleGroupDateInputValue,id:"date",label:"date",value:e.dateValue})),n.a.createElement(h,{saveValue:e.handleProductInputValue,id:"name",label:"name",placeholder:"Product name",value:e.product.name}),n.a.createElement(f,{saveValue:e.handleProductInputValue,id:"price",label:"price",placeholder:"price",value:e.product.price}),n.a.createElement(f,{saveValue:e.handleProductInputValue,id:"quantity",label:"quantity",placeholder:"quantity",value:e.product.quantity}),n.a.createElement(v,{click:e.addProductToGroup,content:"Add product to group",name:"ng-btn"}))},$="https://budgetarchitect.herokuapp.com/",Z=function(e){Object(d.a)(a,e);var t=Object(p.a)(a);function a(e){var r;return Object(i.a)(this,a),(r=t.call(this,e)).handleProductInputValue=function(e){r.setState(Object(u.a)({},r.state,{product:Object(u.a)({},r.state.product,Object(l.a)({},e.target.id,e.target.value))}))},r.handleGroupDateInputValue=function(e){r.setState(Object(l.a)({},e.target.id,e.target.value))},r.addProductToGroup=function(e){e.preventDefault();var t=r.state.product;if(""!==r.state.product.name&&0!==t.price&&t.quantity>0){var a=r.state.newGroupProducts;t.id=Math.floor(1e3*Math.random()),a.push(t),r.setState({newGroupProducts:a,product:{name:"",price:0,quantity:1}})}else r.setState({error:!0})},r.closeErrorAlert=function(){r.setState({error:!1})},r.removeProductFromGroup=function(e){var t=r.state.newGroupProducts,a=t.filter((function(t,a){return t.id===e}));t.splice(t.indexOf(a[0]),1),r.setState({newGroupProducts:t})},r.getTotalPrice=function(e){if(e){for(var t=0,a=0;a<e.length;a++)e[a].quantity>1?t+=e[a].quantity*Number(e[a].price):t+=Number(e[a].price);return t}},r.saveGroupOfProducts=function(){if(""!==r.state.date&&0!==r.state.newGroupProducts.length){var e=r.state.newGroupProducts,t=r.getTotalPrice(e);j.a.post($+"app/v1/groups/",{date:r.state.date,totalPrice:t,userID:localStorage.getItem("user-id"),products:r.state.newGroupProducts},{headers:{Authorization:"Bearer ".concat(localStorage.getItem("jwt"))}}).then((function(e){r.props.saveGroup(e.data),r.props.isGroupSavedAction(!0),r.setState({newGroupProducts:[],date:""}),r.props.addNewGroupClicked(!1)})).catch((function(e){console.log(e)}))}else r.setState({error:!0})},r.editGroupHandler=function(e){e.preventDefault();var t=r.props.groupToEdit._id,a=r.state.newGroupProducts,n=r.getTotalPrice(a),o={_id:t,date:r.state.date,totalPrice:n,userID:localStorage.getItem("user-id"),products:r.state.newGroupProducts};""!==r.state.date&&0!==r.state.newGroupProducts.length?j.a.put($+"app/v1/groups/".concat(t),{date:r.state.date,totalPrice:n,userID:localStorage.getItem("user-id"),products:r.state.newGroupProducts},{headers:{Authorization:"Bearer ".concat(localStorage.getItem("jwt"))}}).then((function(e){r.setState({error:!1,date:"",newGroupProducts:[],product:{name:"",price:0,quantity:1}}),r.props.editGroupAction(o),r.props.groupToEditAction({}),r.props.editGroupClickedAction(!1),r.props.addNewGroupClicked(!1)})).catch((function(e){console.log(e),r.setState({error:!0})})):r.setState({error:!0})},r.closeNewGroup=function(){r.setState({date:"",newGroupProducts:[],product:{name:"",price:0,quantity:1}}),r.props.groupToEditAction({}),r.props.editGroupClickedAction(!1),r.props.addNewGroupClicked(!1)},r.state={date:"",newGroupProducts:[],product:{name:"",price:0,quantity:1},error:!1},r}return Object(s.a)(a,[{key:"componentDidMount",value:function(){if(this.props.isGroupEditClicked){var e=this.props.groupToEdit;this.setState({date:e.date,newGroupProducts:e.products})}}},{key:"render",value:function(){var e=this.state.newGroupProducts,t=this.getTotalPrice(e);return n.a.createElement("main",{className:"ng-main"},this.state.error?n.a.createElement(U,{accept:this.closeErrorAlert,text:"Please fill up every field and add products!",show:!1}):null,n.a.createElement("div",{className:"ng-div"},n.a.createElement("div",{className:"ng-left-side"},n.a.createElement("h3",null,"New group of products"),n.a.createElement(X,{addProductToGroup:this.addProductToGroup,handleGroupDateInputValue:this.handleGroupDateInputValue,handleProductInputValue:this.handleProductInputValue,product:this.state.product,dateValue:this.state.date}),n.a.createElement("div",{className:"ng-btns-div"},n.a.createElement(v,{click:this.closeNewGroup,content:"Close",name:"ng-btn ng-close-btn"}),this.props.isGroupEditClicked?n.a.createElement(v,{click:this.editGroupHandler,content:"Edit group",name:"ng-btn"}):n.a.createElement(v,{click:this.saveGroupOfProducts,content:"Save group",name:"ng-btn"}))),n.a.createElement("div",{className:"ng-right-side"},n.a.createElement(x,{products:this.state.newGroupProducts,totalPrice:t,removeProductFromGroup:this.removeProductFromGroup}))))}}]),a}(n.a.Component);var ee=Object(m.b)((function(e){return{groupToEdit:e.groupsReducer.groupToEdit,isGroupEditClicked:e.groupsReducer.isGroupEditClicked}}),(function(e){return{addNewGroupClicked:function(t){return e(C(t))},isGroupSavedAction:function(t){return e(y(t))},saveGroup:function(t){return e({type:"SAVE_GROUP",payload:t})},editGroupAction:function(t){return e({type:"EDIT_GROUP",payload:t})},groupToEditAction:function(t){return e(P(t))},editGroupClickedAction:function(t){return e(k(t))}}}))(Z);a(81),a(82);var te=function(e){return n.a.createElement("div",null,n.a.createElement(g,{id:e.id,label:e.label}),n.a.createElement("input",{onChange:e.saveValue,className:"inputs",type:"email",id:e.id,value:e.value,placeholder:e.placeholder}))};a(83);var ae=function(e){return n.a.createElement("div",null,n.a.createElement(g,{id:e.id,label:e.label}),n.a.createElement("input",{onChange:e.saveValue,className:"inputs",type:"password",id:e.id,value:e.value,placeholder:e.placeholder}))},re="https://budgetarchitect.herokuapp.com/",ne=function(e){Object(d.a)(a,e);var t=Object(p.a)(a);function a(e){var r;return Object(i.a)(this,a),(r=t.call(this,e)).getUserToEdit=function(){var e=localStorage.getItem("user-id");j.a.get("".concat(re,"app/v1/auth/getuser/").concat(e),{headers:{Authorization:"Bearer ".concat(localStorage.getItem("jwt"))}}).then((function(e){r.setState({name:e.data[0].name,income:e.data[0].income,email:e.data[0].email,password:e.data[0].password})})).catch((function(e){console.log(e)}))},r.saveInputValue=function(e){r.setState(Object(l.a)({},e.target.id,e.target.value))},r.closeAccountHandler=function(){r.props.accountClickedAction(!1)},r.registerUserHandler=function(e){e.preventDefault(),""!==r.state.name&&0!==r.state.income&&""!==r.state.email&&""!==r.state.password?j.a.post(re+"app/v1/auth/register",{name:r.state.name,income:r.state.income,email:r.state.email,password:r.state.password}).then((function(e){j.a.post(re+"app/v1/auth/login",{email:r.state.email,password:r.state.password}).then((function(e){r.setState({error:!1}),console.log(e),localStorage.setItem("jwt",e.data.jwt),localStorage.setItem("name",e.data.name),localStorage.setItem("user-id",e.data.id),localStorage.setItem("userLogged","true"),localStorage.setItem("mode","products"),localStorage.setItem("income",e.data.income),r.props.signInClickedAction(!1),window.location.reload()})).catch((function(e){r.setState({error:!0})}))})).catch((function(e){console.log(e),500===e.response.status&&r.setState({userExists:!0})})):r.setState({error:!0})},r.editUserHandler=function(){var e=localStorage.getItem("user-id");j.a.put(re+"app/v1/auth/updateuser/".concat(e),{name:r.state.name,income:r.state.income,email:r.state.email},{headers:{Authorization:"Bearer ".concat(localStorage.getItem("jwt"))}}).then((function(e){console.log(e),localStorage.setItem("income",r.state.income),r.props.accountClickedAction(!1)})).catch((function(e){console.log(e)}))},r.closeErrorAlert=function(){r.setState({error:!1})},r.choseSignInHandler=function(){r.props.signInClickedAction(!0),r.props.accountClickedAction(!1)},r.state={name:"",income:0,email:"",password:"",error:!1,userExists:!1},r}return Object(s.a)(a,[{key:"componentDidMount",value:function(){"true"===localStorage.getItem("userLogged")&&this.getUserToEdit()}},{key:"render",value:function(){var e=localStorage.getItem("userLogged");return n.a.createElement("main",{className:"account-main"},this.state.error?n.a.createElement(U,{accept:this.closeErrorAlert,text:"Please fill up every field!",show:!1}):null,n.a.createElement("div",{className:"account-div"},n.a.createElement("h1",null,e?"Account":"Register"),n.a.createElement(h,{saveValue:this.saveInputValue,id:"name",label:"full name",placeholder:"full name",value:this.state.name}),n.a.createElement(f,{saveValue:this.saveInputValue,id:"income",label:"monthly income",placeholder:"monthly income",value:this.state.income}),n.a.createElement(te,{saveValue:this.saveInputValue,id:"email",label:"email",placeholder:"email",value:this.state.email}),e?null:n.a.createElement(ae,{saveValue:this.saveInputValue,id:"password",label:"password",placeholder:"password",value:this.state.password}),this.state.userExists?n.a.createElement("p",null,"User already exists!"):null,n.a.createElement("div",{className:"btns-div"},n.a.createElement(v,{click:this.closeAccountHandler,content:"Close",name:"ng-btn"}),n.a.createElement(v,{click:e?this.editUserHandler:this.registerUserHandler,content:e?"Edit":"Register",name:"ng-btn"})),e?null:n.a.createElement("p",{className:"no-acc-p"},"To sign in, click",n.a.createElement("span",{onClick:this.choseSignInHandler,className:"here-span"},"here"))))}}]),a}(r.Component);var oe=Object(m.b)((function(e){return{userToEdit:e.userReducer.userToEdit}}),(function(e){return{accountClickedAction:function(t){return e(_(t))},signInClickedAction:function(t){return e(R(t))}}}))(ne),ce=(a(84),function(e){Object(d.a)(a,e);var t=Object(p.a)(a);function a(e){var r;return Object(i.a)(this,a),(r=t.call(this,e)).saveInputValue=function(e){r.setState(Object(l.a)({},e.target.id,e.target.value))},r.closeSignInHandler=function(){r.props.signInClickedAction(!1)},r.signInHandler=function(){""===r.state.email||""===r.state.password?r.setState({error:!0}):j.a.post("https://budgetarchitect.herokuapp.com/app/v1/auth/login",{email:r.state.email,password:r.state.password}).then((function(e){console.log(e),r.setState({error:!1,userNotFound:!1}),localStorage.setItem("jwt",e.data.jwt),localStorage.setItem("name",e.data.name),localStorage.setItem("user-id",e.data.id),localStorage.setItem("income",e.data.income),localStorage.setItem("userLogged","true"),localStorage.setItem("mode","products"),r.props.signInClickedAction(!1),window.location.reload()})).catch((function(e){console.log(e),r.setState({error:!0}),500===e.response.status&&r.setState({userNotFound:!0})}))},r.closeErrorAlert=function(){r.setState({error:!1})},r.choseRegisterHandler=function(){r.props.signInClickedAction(!1),r.props.accountClickedAction(!0)},r.state={email:"",password:"",error:!1,userNotFound:!1},r}return Object(s.a)(a,[{key:"render",value:function(){return n.a.createElement("div",{className:"sign-in-main"},this.state.error?n.a.createElement(U,{accept:this.closeErrorAlert,text:"User not found! Please fill up every field or check your credentials!",show:!1}):null,n.a.createElement("div",{className:"sign-in-div"},n.a.createElement("h1",null,"sign in"),n.a.createElement(te,{saveValue:this.saveInputValue,id:"email",label:"email",placeholder:"email"}),n.a.createElement(ae,{saveValue:this.saveInputValue,id:"password",label:"password",placeholder:"password"}),n.a.createElement("div",{className:"btns-div"},n.a.createElement(v,{click:this.closeSignInHandler,content:"Close",name:"ng-btn"}),n.a.createElement(v,{click:this.signInHandler,content:"Sign In",name:"ng-btn"})),n.a.createElement("p",{className:"no-acc-p"},"To register, click",n.a.createElement("span",{onClick:this.choseRegisterHandler,className:"here-span"},"here"))))}}]),a}(r.Component));var le=Object(m.b)(null,(function(e){return{signInClickedAction:function(t){return e(R(t))},accountClickedAction:function(t){return e(_(t))}}}))(ce),ue="https://budgetarchitect.herokuapp.com/",ie=function(e){Object(d.a)(a,e);var t=Object(p.a)(a);function a(e){var r;return Object(i.a)(this,a),(r=t.call(this,e)).handleInputValue=function(e){r.setState(Object(u.a)({},r.state,{product:Object(u.a)({},r.state.product,Object(l.a)({},e.target.id,e.target.value))}))},r.saveProductHandler=function(e){var t=r.state.product,a=localStorage.getItem("user-id");e.preventDefault(),""!==t.name&&""!==t.type&&0!==t.price&&t.quantity>=1&&""!==t.date?j.a.post(ue+"app/v1/products/",{name:t.name,type:t.type,price:t.price,quantity:t.quantity,date:t.date,userID:a},{headers:{Authorization:"Bearer ".concat(localStorage.getItem("jwt"))}}).then((function(e){r.props.saveProduct(e.data),r.props.isProductSavedAction(!0),r.setState({product:{name:"",type:"",price:0,quantity:1,date:""},editClicked:!1})})).catch((function(e){console.log(e)})):r.setState({error:!0})},r.closeErrorAlert=function(){r.setState({error:!1})},r.productToEditHandler=function(e){r.props.productToEdit(e),r.setState({editClicked:!0,product:e,prodToEditID:e._id})},r.editProductHandler=function(e){var t=r.state.prodToEditID,a=r.state.product,n=localStorage.getItem("user-id");e.preventDefault(),""!==a.name&&""!==a.type&&0!==a.price&&a.quantity>=1&&""!==a.date?j.a.put(ue+"app/v1/products/".concat(t),{name:a.name,type:a.type,price:a.price,quantity:a.quantity,date:a.date,userID:n},{headers:{Authorization:"Bearer ".concat(localStorage.getItem("jwt"))}}).then((function(e){r.setState({editClicked:!1,error:!1,product:{name:"",type:"",price:0,quantity:1,date:""}}),r.props.editProduct(a)})).catch((function(e){console.log(e)})):r.setState({error:!0})},r.selectSortHandler=function(e){"products"===r.state.mode?r.props.sortProducts(e.target.value):r.props.sortGroups(e.target.value)},r.signOutHandler=function(){localStorage.clear(),window.location.reload()},r.declineSignOutHandler=function(){r.props.signOutClickedAction(!1)},r.getAllProductsHandler=function(){r.setState({isMonthSelected:!1}),j.a.get(ue+"app/v1/products/get/",{headers:{Authorization:"Bearer ".concat(localStorage.getItem("jwt"))}}).then((function(e){r.setState({selectedMonth:"default",productsLoaded:!0}),r.props.getProducts(e.data)})).catch((function(e){r.setState({productsLoaded:!1}),console.log(e)}))},r.getAllGroupsHandler=function(){j.a.get(ue+"app/v1/groups/get/",{headers:{Authorization:"Bearer ".concat(localStorage.getItem("jwt"))}}).then((function(e){r.setState({groupsLoaded:!0}),r.props.getGroupsAction(e.data)})).catch((function(e){r.setState({groupsLoaded:!1}),console.log(e)}))},r.selectFilterHandler=function(e){r.setState({isMonthSelected:!0});var t,a=r.state.selectedYear;4===e.target.value.length?(a=e.target.value,r.setState({selectedYear:e.target.value})):e.target.value.length<4&&(t=e.target.value,r.setState({selectedMonth:e.target.value})),"default"===e.target.value?(r.getAllProductsHandler(),r.getAllGroupsHandler()):"default"!==e.target.value&&r.getFilteredProductsHandler(t,a)},r.getFilteredProductsHandler=function(e,t){var a={headers:{Authorization:"Bearer ".concat(localStorage.getItem("jwt"))}},n=t,o=e;(o=parseInt(o)+1)<10&&(o="0"+o.toString());var c=new Date("".concat(Number(n),"-").concat(o,"-01 00:00:00.000")).getTime(),l=new Date("".concat(Number(n),"-").concat(o,"-31 23:59:59.000")).getTime(),u="".concat(ue,"app/v1/products/get/?date_from=").concat(c,"&date_to=").concat(l),i="".concat(ue,"app/v1/groups/get/?date_from=").concat(c,"&date_to=").concat(l),s=j.a.get(u,a),d=j.a.get(i,a);j.a.all([s,d]).then(j.a.spread((function(){var e=arguments.length<=0?void 0:arguments[0],t=arguments.length<=1?void 0:arguments[1];r.props.getProducts(e.data),r.props.getGroupsAction(t.data)}))).catch((function(e){console.log(e),401===e.response.status&&r.props.signInClickedAction(!0)}))},r.titleClickedHandler=function(){"products"===r.state.mode?r.setState({mode:"groups"}):r.setState({mode:"products"})},r.addNewGroupHandler=function(){r.setState({mode:"groups"}),r.props.addNewGroupClicked(!0)},r.seeAllHandler=function(){r.getAllProductsHandler(),r.getAllGroupsHandler()},r.state={product:{name:"",type:"",price:0,quantity:1,date:""},editClicked:!1,selectedValue:"name",error:!1,prodToEditID:"",productsLoaded:!1,groupsLoaded:!1,selectedMonth:"default",selectedYear:"2020",isMonthSelected:!1,mode:"products"},r}return Object(s.a)(a,[{key:"componentDidMount",value:function(){this.getAllProductsHandler(),this.getAllGroupsHandler()}},{key:"render",value:function(){var e,t,a="true"===localStorage.getItem("userLogged"),r=0,o=0;if(this.props.products){r=(e=this.props.products).length;for(var c=0;c<e.length;c++)e[c].quantity>=1?o+=e[c].quantity*Number(e[c].price):e[c].quantity<1&&(o+=Number(e[c].price))}var l=0,u=0;if(this.props.groups){t=this.props.groups;for(var i=0;i<t.length;i++)l+=Number(t[i].totalPrice),u+=t.length}return n.a.createElement("main",{className:"budget-calc-main"},n.a.createElement(Q,{totalPrice:o,productsLength:r,getAll:this.seeAllHandler,selectFilter:this.selectFilterHandler,selectedMonth:this.state.selectedMonth,selectedYear:this.state.selectedYear,groupsTotalPrice:l,groupsLength:this.props.groups.length,groupsProductsNumber:u,isMonthSelected:this.state.isMonthSelected,mode:this.state.mode}),this.props.accountClicked?n.a.createElement(oe,null):null,this.props.signInClicked&&!this.props.isUserLogged?n.a.createElement(le,null):null,this.props.addNewGroupClicked?n.a.createElement(ee,null):null,this.state.error?n.a.createElement(U,{accept:this.closeErrorAlert,text:"Please fill up every field!"}):null,this.props.signOutClicked?n.a.createElement(U,{accept:this.signOutHandler,decline:this.declineSignOutHandler,text:"Your are about to sign out! Are you sure?",show:!0}):null,n.a.createElement("div",{className:"bc-titles-div"},n.a.createElement("h1",{onClick:this.titleClickedHandler,className:"products"===this.state.mode?"content-title-active content-title":"content-title"},"products "),n.a.createElement("h1",{onClick:this.titleClickedHandler,className:"groups"===this.state.mode?"content-title-active content-title":"content-title"},"groups")),a?n.a.createElement(n.a.Fragment,null,"products"===this.state.mode?n.a.createElement(b,{handleInputValue:this.handleInputValue,product:this.state.product,editClicked:this.state.editClicked,editProduct:this.editProductHandler,saveProduct:this.saveProductHandler,types:this.state.types}):null,n.a.createElement("div",{className:"budget-calc-content-div"},"products"===this.state.mode?n.a.createElement(M,{getAllProducts:this.getAllProductsHandler,getFilteredProductsHandler:this.getFilteredProductsHandler,productsLoaded:this.state.productsLoaded,properties:this.state.properties,products:this.props.products,productToEdit:this.productToEditHandler,handleCheckboxChange:this.handleCheckboxChange,editClicked:this.state.editClicked}):n.a.createElement(J,{groupsLoaded:this.state.groupsLoaded,getAllGroups:this.getAllGroupsHandler}),n.a.createElement(I,{mode:this.state.mode,deleteProducts:this.deleteProducts,selectSort:this.selectSortHandler,addNewGroupClicked:this.addNewGroupHandler}))):n.a.createElement("div",null,n.a.createElement("h1",{className:"welcome-h1"},"Please sign in or register!")))}}]),a}(n.a.Component);var se=Object(m.b)((function(e){return{products:e.productsReducer.products,groups:e.groupsReducer.groups,groupsProductsNumber:e.groupsReducer.groupsProductsNumber,addNewGroupClicked:e.groupsReducer.addNewGroupClicked,accountClicked:e.userReducer.accountClicked,signInClicked:e.userReducer.signInClicked,signOutClicked:e.userReducer.signOutClicked}}),(function(e){return{getProducts:function(t){return e(D(t))},getGroupsAction:function(t){return e(S(t))},saveProduct:function(t){return e({type:"SAVE_PRODUCT",payload:t})},productToEdit:function(t){return e({type:"PRODUCT_TO_EDIT",payload:t})},editProduct:function(t){return e({type:"EDIT_PRODUCT",payload:t})},sortProducts:function(t){return e(function(e){return{type:"SORT_PRODUCTS",payload:e}}(t))},sortGroups:function(t){return e(function(e){return{type:"SORT_GROUPS",payload:e}}(t))},signOutClickedAction:function(t){return e(V(t))},isProductSavedAction:function(t){return e(H(t))}}}))(ie);a(85);var de=Object(m.b)(null,(function(e){return{accountClickedAction:function(t){return e(_(t))},signInClickedAction:function(t){return e(R(t))},signOutClickedAction:function(t){return e(V(t))}}}))((function(e){var t="true"===localStorage.getItem("userLogged");return n.a.createElement("nav",{className:"header-main"},n.a.createElement("h1",{className:"header-title"},"Budget Architect"),n.a.createElement("ul",{className:"header-ul"},n.a.createElement("li",{onClick:function(){e.accountClickedAction(!0)}},t?"Account":"Register"),n.a.createElement("li",{onClick:t?function(){e.signOutClickedAction(!0)}:function(){e.signInClickedAction(!0)}},t?"Sign Out":"Sign In")))}));var pe=function(){return n.a.createElement("div",{className:"App"},n.a.createElement(de,null),n.a.createElement(se,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var me=a(12),ge={signInClicked:!1,accountClicked:!1,signOutClicked:!1,userToEdit:{}};var he=a(10),Ee={products:[],addNewGroupClicked:!1,productToEdit:{},isProductSaved:!1};var fe={addNewGroupClicked:!1,groups:[],isGroupSaved:!1,groupToEdit:{},isGroupEditClicked:!1,groupsProductsNumber:0};var ve=Object(me.b)({userReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ge,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SIGN_IN_CLICKED":return Object(u.a)({},e,{signInClicked:t.payload});case"SIGN_OUT_CLICKED":return Object(u.a)({},e,{signOutClicked:t.payload});case"ACCOUNT_CLICKED":return Object(u.a)({},e,{accountClicked:t.payload});case"EDIT_USER_INFO":return Object(u.a)({},e,{userToEdit:t.payload});default:return e}},productsReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ee,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_PRODUCTS":return Object(u.a)({},e,{products:t.payload});case"SAVE_PRODUCT":return Object(u.a)({},e,{products:[].concat(Object(he.a)(e.products),[t.payload])});case"IS_PRODUCT_SAVED":return Object(u.a)({},e,{isProductSaved:t.payload});case"PRODUCT_TO_EDIT":return Object(u.a)({},e,{productToEdit:t.payload});case"EDIT_PRODUCT":return Object(u.a)({},e,{products:e.products.map((function(e){return e._id===t.payload._id?Object(u.a)({},e,{},t.payload):e}))});case"DELETE_PRODUCT":return Object(u.a)({},e,{products:e.products.filter((function(e){return e._id!==t.payload}))});case"SORT_PRODUCTS":var a=t.payload;return Object(u.a)({},e,{products:Object(he.a)(e.products).sort((function(e,t){return e[a]>t[a]?1:t[a]>e[a]?-1:0}))});default:return e}},groupsReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:fe,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_GROUPS":return Object(u.a)({},e,{groups:t.payload});case"ADD_NEW_GROUP_CLICKED":return Object(u.a)({},e,{addNewGroupClicked:t.payload});case"SAVE_GROUP":return Object(u.a)({},e,{groups:[].concat(Object(he.a)(e.groups),[t.payload])});case"IS_GROUP_SAVED":return Object(u.a)({},e,{isGroupSaved:t.payload});case"DELETE_GROUP":return Object(u.a)({},e,{groups:e.groups.filter((function(e){return e._id!==t.payload._id}))});case"SORT_GROUPS":var a=t.payload;return Object(u.a)({},e,{groups:Object(he.a)(e.groups).sort((function(e,t){return e[a]>t[a]?-1:t[a]>e[a]?1:0}))});case"GROUP_TO_EDIT":return Object(u.a)({},e,{groupToEdit:t.payload});case"EDIT_GROUP_CLICKED":return Object(u.a)({},e,{isGroupEditClicked:t.payload});case"EDIT_GROUP":return Object(u.a)({},e,{groups:e.groups.map((function(e){return e._id===t.payload._id?Object(u.a)({},e,{},t.payload):e}))});default:return e}}}),be=Object(me.c)(ve);c.a.render(n.a.createElement(m.a,{store:be},n.a.createElement(pe,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}],[[27,1,2]]]);
//# sourceMappingURL=main.d4ff8073.chunk.js.map