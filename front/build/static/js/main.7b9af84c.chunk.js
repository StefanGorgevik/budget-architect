(this.webpackJsonpfront=this.webpackJsonpfront||[]).push([[0],[,,,,,,,,,,,function(e,t,a){},,,,,,,,,,,,,,,,function(e,t,a){e.exports=a(86)},,,,,function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},,,,,,,function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},,,,,,,,,,,,,,,,,,function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(13),o=a.n(c),l=(a(32),a(33),a(9)),u=a(1),i=a(4),s=a(5),d=a(7),p=a(6),m=(a(34),a(35),a(2));a(11),a(42),a(43);var g=function(e){return r.a.createElement("label",{className:"input-label",htmlFor:e.id},e.label)};var h=function(e){return r.a.createElement("div",{className:"input-div"},r.a.createElement(g,{id:e.id,label:e.label}),r.a.createElement("input",{type:"text",onChange:e.saveValue,className:"inputs",id:e.id,placeholder:e.placeholder,value:e.value}))};a(44);var E=function(e){return r.a.createElement("div",{className:"input-div"},r.a.createElement(g,{id:e.id,label:e.label}),r.a.createElement("input",{onChange:e.saveValue,className:"inputs",type:"date",id:e.id,value:e.value?e.value.toString().slice(0,10):"",min:"2020-01-01",max:"2020-12-31"}))};a(45);var v=function(e){return r.a.createElement("div",{className:"input-div"},r.a.createElement(g,{id:e.id,label:e.label}),r.a.createElement("input",{onChange:e.saveValue,className:"inputs",type:"number",id:e.id,value:e.value,required:!0}))};a(46);var f=function(e){return r.a.createElement("button",{onClick:e.click,id:"button",className:e.name},e.content)};var b=Object(m.b)((function(e){return{types:e.budgetCalcTypes}}))((function(e){return r.a.createElement("form",{onSubmit:e.saveProduct,className:"budget-calc-inputs"},r.a.createElement("div",{className:"bcalc-bigger-inputs"},r.a.createElement(h,{saveValue:e.handleInputValue,label:"name",id:"name",placeholder:"product name",value:e.product.name}),r.a.createElement(E,{saveValue:e.handleInputValue,label:"date",id:"date",placeholder:"product date",value:e.product.date}),r.a.createElement(h,{saveValue:e.handleInputValue,label:"type",id:"type",placeholder:"product type",value:e.product.type})),r.a.createElement("div",{className:"bcalc-smaller-inputs"},r.a.createElement(v,{saveValue:e.handleInputValue,label:"price",id:"price",placeholder:"price",value:e.product.price}),r.a.createElement(v,{saveValue:e.handleInputValue,label:"quantity",id:"quantity",placeholder:"quantity",value:e.product.quantity})),e.editClicked?r.a.createElement(f,{click:e.editProduct,content:"Save",name:"products-submit-btn"}):r.a.createElement(f,{click:e.saveProduct,content:"Submit",name:"products-submit-btn"}))}));a(47);function S(e){return{type:"GET_GROUPS",payload:e}}function C(e){return{type:"ADD_NEW_GROUP_CLICKED",payload:e}}function y(e){return{type:"IS_GROUP_SAVED",payload:e}}function P(e){return{type:"GROUP_TO_EDIT",payload:e}}function k(e){return{type:"EDIT_GROUP_CLICKED",payload:e}}a(48),a(49);var N=function(e){var t,a=e.mode;return t="groups"===a?["date","totalPrice"]:["name","type","price","quantity","date"],r.a.createElement("div",{className:"select-sort-div"},r.a.createElement("select",{id:"sort",className:"type-select",onChange:e.selectSort},r.a.createElement("option",{value:"default"},"Select sort ","products"===a?"ascending":"descending"),t.map((function(e,t){return r.a.createElement("option",{key:"sort".concat(t),value:e},e)}))))};var G=function(e){return r.a.createElement("div",{className:"table-tools-content"},r.a.createElement("div",{className:"filter-div"},r.a.createElement(N,{selectSort:e.selectSort,sorts:e.sorts,mode:e.mode})),r.a.createElement(f,{click:e.addNewGroupClicked,content:"Add a new group",name:"table-tools-btn"}))},O=function(e){Object(d.a)(a,e);var t=Object(p.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).handleHover=function(){n.setState({hovered:!0})},n.handleHoverLeave=function(){n.setState({hovered:!1})},n.state={hovered:!1},n}return Object(s.a)(a,[{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:this.state.hovered?"table-tools-div table-tools-div-active":"table-tools-div",onMouseEnter:this.handleHover,onMouseLeave:this.handleHoverLeave},this.state.hovered?r.a.createElement(G,{selectSort:this.props.selectSort,addNewGroupClicked:this.props.addNewGroupClicked,mode:this.props.mode}):r.a.createElement("div",{className:"before-hover-div"},r.a.createElement("p",null,r.a.createElement("i",{className:"fas fa-tools"})))))}}]),a}(r.a.Component);var I=Object(m.b)(null,(function(e){return{addNewGroupClicked:function(t){return e(C(t))}}}))(O);a(50),a(51);var w=function(e){var t=[];return e.products&&(t=e.products.map((function(t,a){return r.a.createElement("tr",{key:t+a,className:"product-tr"},r.a.createElement("td",null,t.name),r.a.createElement("td",null,t.type),r.a.createElement("td",{className:"number-td"},t.quantity>=1?t.price*t.quantity:t.price,t.quantity>=1?r.a.createElement("span",null,"("+t.price+")"):null),r.a.createElement("td",{className:"number-td"},t.quantity),r.a.createElement("td",null,t.date.toString().slice(0,10)),r.a.createElement("td",{id:"edit-td"},r.a.createElement(f,{click:function(){return e.productToEdit(t)},content:"Edit",name:e.editClicked?"budg-edit-btn budg-edit-btn-disabled":"budg-edit-btn"})),r.a.createElement("td",{id:"edit-td"},r.a.createElement(f,{click:function(){return e.productToDelete(t._id)},content:"Delete",name:"budg-edit-btn"})))}))),r.a.createElement("tbody",null,t)};a(52);var A=function(e){return r.a.createElement("div",{className:"top-table"},r.a.createElement("ul",null,r.a.createElement("li",{id:"name-li"},"Name"),r.a.createElement("li",{id:"type-li"},"Type"),r.a.createElement("li",{id:"price-li"},"Price"),r.a.createElement("li",{id:"quantity-li"},"Quantity"),r.a.createElement("li",{id:"date-li"},"Date")))},T=a(3),j=a.n(T);function D(e){return{type:"GET_PRODUCTS",payload:e}}function H(e){return{type:"IS_PRODUCT_SAVED",payload:e}}function _(e){return{type:"ACCOUNT_CLICKED",payload:e}}function R(e){return{type:"SIGN_IN_CLICKED",payload:e}}function V(e){return{type:"SIGN_OUT_CLICKED",payload:e}}a(70);var U=function(e){return r.a.createElement("main",{className:"err-alert-main"},r.a.createElement("div",{className:"err-alert-div"},r.a.createElement("h1",null,e.title),r.a.createElement("p",null,e.text),r.a.createElement(f,{click:e.accept,name:"ng-btn",content:"OK"}),e.show?r.a.createElement(f,{click:e.decline,name:"ng-btn",content:"CLOSE"}):null))};a(71);var L=function(){return r.a.createElement("div",{className:"lds-facebook"},r.a.createElement("div",null),r.a.createElement("div",null),r.a.createElement("div",null))},q=function(e){Object(d.a)(a,e);var t=Object(p.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).deleteProductClicked=function(e){n.setState({deleteProductClicked:!0,productToDelete:e})},n.deleteProduct=function(){if(n.state.productToDelete){var e=n.state.productToDelete;j.a.delete("".concat("https://budgetarchitect.herokuapp.com/","app/v1/products/").concat(e),{headers:{Authorization:"Bearer ".concat(localStorage.getItem("jwt"))}}).then((function(t){n.props.deleteProduct(e),n.setState({deleteProductClicked:!1,productToDelete:""})})).catch((function(e){console.log(e)}))}},n.closeAlert=function(){n.setState({deleteProductClicked:!1})},n.state={deleteProductClicked:!1,productToDelete:""},n}return Object(s.a)(a,[{key:"componentDidUpdate",value:function(){this.props.isProductSaved&&(this.props.getAllProducts(),this.props.isProductSavedAction(!1))}},{key:"render",value:function(){return r.a.createElement("div",{className:"table-div"},this.state.deleteProductClicked?r.a.createElement(U,{accept:this.deleteProduct,decline:this.closeAlert,text:"You are about to delete a product. Are you sure?",show:!0,title:"Delete"}):null,this.props.productsLoaded?0!==this.props.products.length?r.a.createElement(r.a.Fragment,null,r.a.createElement(A,{properties:this.props.properties}),r.a.createElement("div",{className:"products-div"},r.a.createElement("table",{className:"budg-table"},r.a.createElement(w,{products:this.props.products,productToEdit:this.props.productToEdit,productToDelete:this.deleteProductClicked,handleCheckboxChange:this.props.handleCheckboxChange,editClicked:this.props.editClicked})))):r.a.createElement("h1",{className:"table-h1"},"No products found. Please create a product!"):r.a.createElement(L,null))}}]),a}(r.a.Component);var F=Object(m.b)((function(e){return{isProductSaved:e.productsReducer.isProductSaved}}),(function(e){return{getProducts:function(t){return e(D(t))},deleteProduct:function(t){return e(function(e){return{type:"DELETE_PRODUCT",payload:e}}(t))},signInClickedAction:function(t){return e(R(t))},isProductSavedAction:function(t){return e(H(t))}}}))(q);a(72),a(73),a(74),a(75);var M=function(e){return r.a.createElement("main",{className:"ng-info-main"},r.a.createElement("p",null,"Number of products: ",r.a.createElement("span",null,e.productsLength)),r.a.createElement("p",null,"Total price: ",r.a.createElement("span",null,e.totalPrice)))};var x=Object(m.b)((function(e){return{mode:e.groupsReducer.mode,addNewGroupClicked:e.groupsReducer.addNewGroupClicked}}))((function(e){if(e.products)var t=e.products,a=e.products.map((function(t,a){return r.a.createElement("tr",{key:t.name+a,className:"ng-new-prod-tr"},r.a.createElement("td",{className:"ng-new-prod-td"},t.name),r.a.createElement("td",{className:"ng-new-prod-td"},0!==t.quantity?t.price*t.quantity:t.price,0!==t.quantity?r.a.createElement("span",null,"("+t.price+")"):null),r.a.createElement("td",{className:"ng-new-prod-td"},t.quantity),e.addNewGroupClicked?r.a.createElement("td",{className:"x-td",onClick:function(){return e.removeProductFromGroup(t.id)}},"X"):null)}));return r.a.createElement(r.a.Fragment,null,r.a.createElement(M,{productsLength:t?t.length:null,totalPrice:e.totalPrice}),r.a.createElement("table",{className:"ng-table"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Name"),r.a.createElement("th",null,"Price"),r.a.createElement("th",null,"Quantity"),e.addNewGroupClicked?r.a.createElement("th",null):null)),r.a.createElement("tbody",{className:"ng-table-body"},a)))}));var B=function(e){var t=0;return e.products&&(t=e.products.length),r.a.createElement("div",{className:"sg-main"},r.a.createElement("div",{className:"sg-div"},0!==t?r.a.createElement(r.a.Fragment,null,r.a.createElement("h1",null,"Products"),r.a.createElement(x,{products:e.products,totalPrice:e.totalPrice})," "):r.a.createElement("h2",null,"Select a group"),r.a.createElement("div",{className:"sg-btn-div"},r.a.createElement(f,{click:e.closeSelectedGroup,content:"Close",name:"ng-btn"}),r.a.createElement(f,{click:function(){return e.editGroup(e.selectedGroup)},content:"Edit",name:"ng-btn"}))))},z=(a(76),function(e){Object(d.a)(a,e);var t=Object(p.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).state={groupsLoaded:!1},n}return Object(s.a)(a,[{key:"componentDidUpdate",value:function(){this.props.isGroupSaved&&(this.props.getAllGroups(),this.props.isGroupSavedAction(!1))}},{key:"render",value:function(){var e=this,t=0,a=[];return this.props.groups&&(t=this.props.groups.length,a=this.props.groups.map((function(t,a){return r.a.createElement("tr",{key:t+a,className:"group-tr"},r.a.createElement("td",null,t.date.toString().slice(0,10)),r.a.createElement("td",null,t.totalPrice),r.a.createElement("td",{id:"edit-td"},r.a.createElement(f,{click:function(){return e.props.selectedGroupHandler(t)},content:"Open",name:"budg-edit-btn budg-dlt-btn"})),r.a.createElement("td",{id:"edit-td"},r.a.createElement(f,{click:function(){return e.props.editGroupHandler(t)},content:"Edit",name:"budg-edit-btn budg-dlt-btn"})),r.a.createElement("td",{id:"edit-td"},r.a.createElement(f,{click:function(){return e.props.deleteGroupHandler(t)},content:"Delete",name:"budg-edit-btn budg-dlt-btn"})))}))),r.a.createElement("div",null,this.props.groupsLoaded?0!==t?r.a.createElement("table",{className:"groups-table"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Date"),r.a.createElement("th",null,"Total Price"),r.a.createElement("th",null,"Products"),r.a.createElement("th",null),r.a.createElement("th",null),r.a.createElement("th",null))),r.a.createElement("tbody",null,a)):r.a.createElement("h1",{className:"table-h1"},"No groups found. Please create a groups of products!"):r.a.createElement(L,null))}}]),a}(r.a.Component));var K=Object(m.b)((function(e){return{groups:e.groupsReducer.groups,isGroupSaved:e.groupsReducer.isGroupSaved}}),(function(e){return{getGroupsAction:function(t){return e(S(t))},isGroupSavedAction:function(t){return e(y(t))}}}))(z),Y=function(e){Object(d.a)(a,e);var t=Object(p.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).selectedGroupHandler=function(e){n.setState({selectedGroup:e,selectedProducts:e.products,groupSelected:!0})},n.addNewGroupHandler=function(){n.props.addNewGroupClicked(!n.state.addNewGroupClicked)},n.deleteGroupHandler=function(e){n.setState({groupToDelete:e,deleteClicked:!0})},n.acceptDelete=function(){j.a.delete("".concat("https://budgetarchitect.herokuapp.com/","app/v1/groups/").concat(n.state.groupToDelete._id),{headers:{Authorization:"Bearer ".concat(localStorage.getItem("jwt"))}}).then((function(e){n.props.deleteGroup(n.state.groupToDelete),n.setState({deleteClicked:!1,selected:[]})})).catch((function(e){console.log(e)}))},n.closeAlert=function(){n.setState({deleteClicked:!1})},n.closeSelectedGroupHandler=function(){n.setState({groupSelected:!1})},n.editGroupHandler=function(e){n.props.groupToEditAction(e),n.props.editGroupClickedAction(!0),n.props.addNewGroupClicked(!0),n.setState({groupSelected:!1})},n.state={selectedGroup:[],selectedProducts:[],groupSelected:!1,deleteClicked:!1,groupToDelete:null,addNewGroupClicked:!1},n}return Object(s.a)(a,[{key:"render",value:function(){if(this.state.selectedProducts)for(var e=this.state.selectedProducts,t=0,a=0;a<e.length;a++)e[a].quantity>1?t+=e[a].quantity*Number(e[a].price):e[a].quantity<2&&(t+=Number(e[a].price));return r.a.createElement("main",{className:"groups-main"},this.state.deleteClicked?r.a.createElement(U,{accept:this.acceptDelete,decline:this.closeAlert,text:"You are about to delete a group of products. Are you sure?",show:!0,title:"Delete"}):null,this.state.groupSelected?r.a.createElement(B,{products:this.state.selectedProducts,selectedGroup:this.state.selectedGroup,totalPrice:t,addNewGroupHandler:this.addNewGroupHandler,closeSelectedGroup:this.closeSelectedGroupHandler,editGroup:this.editGroupHandler}):null,r.a.createElement(f,{click:this.addNewGroupHandler,content:"Add a new group of products",name:"table-tools-btn add-group-btn"}),r.a.createElement("div",{className:"groups-content"},r.a.createElement("div",{className:"groups-div"},r.a.createElement(K,{groups:this.props.groups,selectedGroupHandler:this.selectedGroupHandler,deleteGroupHandler:this.deleteGroupHandler,editGroupHandler:this.editGroupHandler,totalPrice:t,groupsLoaded:this.props.groupsLoaded,getAllGroups:this.props.getAllGroups}))))}}]),a}(r.a.Component);var J=Object(m.b)((function(e){return{groups:e.groupsReducer.groups}}),(function(e){return{addNewGroupClicked:function(t){return e(C(t))},deleteGroup:function(t){return e(function(e){return{type:"DELETE_GROUP",payload:e}}(t))},groupToEditAction:function(t){return e(P(t))},editGroupClickedAction:function(t){return e(k(t))}}}))(Y);a(77),a(78);var W=function(e){return r.a.createElement("div",{className:"select-div"},r.a.createElement("select",{name:"select",className:"select",onChange:e.selectOption,value:e.selectedMonth},"month"===e.label?r.a.createElement("option",{className:"option",value:"default",defaultChecked:!0},"All items"):null,e.options.map((function(e,t){return r.a.createElement("option",{className:"option",key:"option".concat(t),value:t},e)}))))};var Q=function(e){var t=(new Date).getFullYear(),a=Array.from(new Array(1),(function(e,a){return a+t})).reverse(),n=localStorage.getItem("income")-e.totalPrice-e.groupsTotalPrice;return r.a.createElement("main",{className:"head-info-main"},e.isUserLogged?r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"total-info-div"},r.a.createElement("p",{className:"head-info-p budget-p"},"Monthly Budget ",r.a.createElement("span",null,localStorage.getItem("income"))),e.isMonthSelected?r.a.createElement("p",{className:"head-info-p remaining-p"},"Remaining ",r.a.createElement("span",null,n)):null),r.a.createElement("div",{className:"products-info-div"},r.a.createElement("p",{className:"head-info-p"},"Price ",r.a.createElement("span",null,e.totalPrice)),r.a.createElement("p",{className:"head-info-p"},"Products",r.a.createElement("span",null,e.productsLength))),r.a.createElement("div",{className:"groups-info-div"},r.a.createElement("p",{className:"head-info-p groups-p"},"Groups",r.a.createElement("span",null,e.groupsLength)),r.a.createElement("p",{className:"head-info-p"},"Products",r.a.createElement("span",null,e.groupsProductsNumber)),r.a.createElement("p",{className:"head-info-p"},"Price",r.a.createElement("span",null,e.groupsTotalPrice))),r.a.createElement("div",{className:"table-info-selects"},r.a.createElement("p",{className:"label-p"},"Filter: "),r.a.createElement(W,{options:["January","February","March","April","May","June","July","August","September","October","November","December"],selectOption:e.selectFilter,selectedMonth:e.selectedMonth,label:"month",value:e.selectedMonth}),r.a.createElement(W,{options:a,selectOption:e.selectFilter,selectedMonth:e.selectedMonth,label:"year"}),r.a.createElement(f,{click:e.getAll,content:"See all",name:"table-info-btn hinfo-btn"}))):r.a.createElement("div",null,r.a.createElement("h1",{className:"welcome-h1"},"Please sign in or register to see your products!")))};a(79),a(80);var X=function(e){return r.a.createElement("form",{className:"ng-form",onSubmit:e.addProductToGroup},r.a.createElement("div",{className:"ng-inputs"},r.a.createElement(h,{saveValue:e.handleProductInputValue,id:"name",label:"name",placeholder:"Product name",value:e.product.name}),r.a.createElement(v,{saveValue:e.handleProductInputValue,id:"price",label:"price",placeholder:"price",value:e.product.price}),r.a.createElement(v,{saveValue:e.handleProductInputValue,id:"quantity",label:"quantity",placeholder:"quantity",value:e.product.quantity})),r.a.createElement("div",{className:"ng-btn-div"},r.a.createElement(f,{click:e.addProductToGroup,content:"Add product to group",name:"ng-btn"})))},$="https://budgetarchitect.herokuapp.com/",Z=function(e){Object(d.a)(a,e);var t=Object(p.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).handleProductInputValue=function(e){n.setState(Object(u.a)({},n.state,{product:Object(u.a)({},n.state.product,Object(l.a)({},e.target.id,e.target.value))}))},n.handleGroupDateInputValue=function(e){n.setState(Object(l.a)({},e.target.id,e.target.value))},n.addProductToGroup=function(e){e.preventDefault();var t=n.state.product;if(""!==n.state.product.name&&0!==t.price&&t.quantity>0){var a=n.state.newGroupProducts;t.id=Math.floor(1e3*Math.random()),a.push(t),n.setState({newGroupProducts:a,product:{name:"",price:0,quantity:1}})}else n.setState({error:!0})},n.closeErrorAlert=function(){n.setState({error:!1})},n.removeProductFromGroup=function(e){var t=n.state.newGroupProducts,a=t.filter((function(t,a){return t.id===e}));t.splice(t.indexOf(a[0]),1),n.setState({newGroupProducts:t})},n.getTotalPrice=function(e){if(e){for(var t=0,a=0;a<e.length;a++)e[a].quantity>1?t+=e[a].quantity*Number(e[a].price):t+=Number(e[a].price);return t}},n.saveGroupOfProducts=function(){if(""!==n.state.date&&0!==n.state.newGroupProducts.length){var e=n.state.newGroupProducts,t=n.getTotalPrice(e);j.a.post($+"app/v1/groups/",{date:n.state.date,totalPrice:t,userID:localStorage.getItem("user-id"),products:n.state.newGroupProducts},{headers:{Authorization:"Bearer ".concat(localStorage.getItem("jwt"))}}).then((function(e){n.props.saveGroup(e.data),n.props.isGroupSavedAction(!0),n.setState({newGroupProducts:[],date:""}),n.props.addNewGroupClicked(!1)})).catch((function(e){console.log(e)}))}else n.setState({error:!0})},n.editGroupHandler=function(e){e.preventDefault();var t=n.props.groupToEdit._id,a=n.state.newGroupProducts,r=n.getTotalPrice(a),c={_id:t,date:n.state.date,totalPrice:r,userID:localStorage.getItem("user-id"),products:n.state.newGroupProducts};""!==n.state.date&&0!==n.state.newGroupProducts.length?j.a.put($+"app/v1/groups/".concat(t),{date:n.state.date,totalPrice:r,userID:localStorage.getItem("user-id"),products:n.state.newGroupProducts},{headers:{Authorization:"Bearer ".concat(localStorage.getItem("jwt"))}}).then((function(e){n.setState({error:!1,date:"",newGroupProducts:[],product:{name:"",price:0,quantity:1}}),n.props.editGroupAction(c),n.props.groupToEditAction({}),n.props.editGroupClickedAction(!1),n.props.addNewGroupClicked(!1)})).catch((function(e){console.log(e),n.setState({error:!0})})):n.setState({error:!0})},n.closeNewGroup=function(){n.setState({date:"",newGroupProducts:[],product:{name:"",price:0,quantity:1}}),n.props.groupToEditAction({}),n.props.editGroupClickedAction(!1),n.props.addNewGroupClicked(!1)},n.state={date:"",newGroupProducts:[],product:{name:"",price:0,quantity:1},error:!1},n}return Object(s.a)(a,[{key:"componentDidMount",value:function(){if(this.props.isGroupEditClicked){var e=this.props.groupToEdit;this.setState({date:e.date,newGroupProducts:e.products})}}},{key:"render",value:function(){var e=this.state.newGroupProducts,t=this.getTotalPrice(e);return r.a.createElement("main",{className:"ng-main"},this.state.error?r.a.createElement(U,{accept:this.closeErrorAlert,text:"Please fill up every field and add products!",show:!1}):null,r.a.createElement("div",{className:"ng-div"},r.a.createElement("div",{className:"ng-left-side"},r.a.createElement("h3",null,"New group of products"),r.a.createElement("div",{className:"ng-date-div"},r.a.createElement(E,{saveValue:this.handleGroupDateInputValue,id:"date",label:"date",value:this.state.date})),r.a.createElement(X,{addProductToGroup:this.addProductToGroup,handleProductInputValue:this.handleProductInputValue,product:this.state.product}),r.a.createElement("div",{className:"ng-btns-div"},r.a.createElement(f,{click:this.closeNewGroup,content:"Close",name:"ng-btn ng-close-btn"}),this.props.isGroupEditClicked?r.a.createElement(f,{click:this.editGroupHandler,content:"Edit group",name:"ng-btn"}):r.a.createElement(f,{click:this.saveGroupOfProducts,content:"Save group",name:"ng-btn"}))),r.a.createElement("div",{className:"ng-right-side"},r.a.createElement(x,{products:this.state.newGroupProducts,totalPrice:t,removeProductFromGroup:this.removeProductFromGroup}))))}}]),a}(r.a.Component);var ee=Object(m.b)((function(e){return{groupToEdit:e.groupsReducer.groupToEdit,isGroupEditClicked:e.groupsReducer.isGroupEditClicked}}),(function(e){return{addNewGroupClicked:function(t){return e(C(t))},isGroupSavedAction:function(t){return e(y(t))},saveGroup:function(t){return e({type:"SAVE_GROUP",payload:t})},editGroupAction:function(t){return e({type:"EDIT_GROUP",payload:t})},groupToEditAction:function(t){return e(P(t))},editGroupClickedAction:function(t){return e(k(t))}}}))(Z);a(81),a(82);var te=function(e){return r.a.createElement("div",{className:"input-div"},r.a.createElement(g,{id:e.id,label:e.label}),r.a.createElement("input",{onChange:e.saveValue,className:"inputs",type:"email",id:e.id,value:e.value,placeholder:e.placeholder}))};a(83);var ae=function(e){return r.a.createElement("div",{className:"input-div"},r.a.createElement(g,{id:e.id,label:e.label}),r.a.createElement("input",{onChange:e.saveValue,className:"inputs",type:"password",id:e.id,value:e.value,placeholder:e.placeholder}))},ne="https://budgetarchitect.herokuapp.com/",re=function(e){Object(d.a)(a,e);var t=Object(p.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).getUserToEdit=function(){var e=localStorage.getItem("user-id");j.a.get("".concat(ne,"app/v1/auth/getuser/").concat(e),{headers:{Authorization:"Bearer ".concat(localStorage.getItem("jwt"))}}).then((function(e){n.setState({name:e.data[0].name,income:e.data[0].income,email:e.data[0].email,password:e.data[0].password})})).catch((function(e){console.log(e)}))},n.saveInputValue=function(e){n.setState(Object(l.a)({},e.target.id,e.target.value))},n.closeAccountHandler=function(){n.props.accountClickedAction(!1)},n.registerUserHandler=function(e){e.preventDefault(),""!==n.state.name&&0!==n.state.income&&""!==n.state.email&&""!==n.state.password?j.a.post(ne+"app/v1/auth/register",{name:n.state.name,income:n.state.income,email:n.state.email,password:n.state.password}).then((function(e){j.a.post(ne+"app/v1/auth/login",{email:n.state.email,password:n.state.password}).then((function(e){n.setState({error:!1}),console.log(e),localStorage.setItem("jwt",e.data.jwt),localStorage.setItem("name",e.data.name),localStorage.setItem("user-id",e.data.id),localStorage.setItem("userLogged","true"),localStorage.setItem("mode","products"),localStorage.setItem("income",e.data.income),n.props.signInClickedAction(!1),window.location.reload()})).catch((function(e){n.setState({error:!0})}))})).catch((function(e){console.log(e),500===e.response.status&&n.setState({userExists:!0})})):n.setState({error:!0})},n.editUserHandler=function(){var e=localStorage.getItem("user-id");j.a.put(ne+"app/v1/auth/updateuser/".concat(e),{name:n.state.name,income:n.state.income,email:n.state.email},{headers:{Authorization:"Bearer ".concat(localStorage.getItem("jwt"))}}).then((function(e){console.log(e),localStorage.setItem("income",n.state.income),n.props.accountClickedAction(!1)})).catch((function(e){console.log(e)}))},n.closeErrorAlert=function(){n.setState({error:!1})},n.choseSignInHandler=function(){n.props.signInClickedAction(!0),n.props.accountClickedAction(!1)},n.state={name:"",income:0,email:"",password:"",error:!1,userExists:!1},n}return Object(s.a)(a,[{key:"componentDidMount",value:function(){"true"===localStorage.getItem("userLogged")&&this.getUserToEdit()}},{key:"render",value:function(){var e=localStorage.getItem("userLogged");return r.a.createElement("main",{className:"account-main"},this.state.error?r.a.createElement(U,{accept:this.closeErrorAlert,text:"Please fill up every field!",show:!1}):null,r.a.createElement("div",{className:"account-div"},r.a.createElement("h1",null,e?"Account":"Register"),r.a.createElement("div",{className:"account-inputs"},r.a.createElement(h,{saveValue:this.saveInputValue,id:"name",label:"full name",placeholder:"full name",value:this.state.name}),r.a.createElement(v,{saveValue:this.saveInputValue,id:"income",label:"monthly income",placeholder:"monthly income",value:this.state.income}),r.a.createElement(te,{saveValue:this.saveInputValue,id:"email",label:"email",placeholder:"email",value:this.state.email}),e?null:r.a.createElement(ae,{saveValue:this.saveInputValue,id:"password",label:"password",placeholder:"password",value:this.state.password})),this.state.userExists?r.a.createElement("p",null,"User already exists!"):null,r.a.createElement("div",{className:"btns-div"},r.a.createElement(f,{click:this.closeAccountHandler,content:"Close",name:"ng-btn"}),r.a.createElement(f,{click:e?this.editUserHandler:this.registerUserHandler,content:e?"Edit":"Register",name:"ng-btn"})),e?null:r.a.createElement("p",{className:"no-acc-p"},"To sign in, click",r.a.createElement("span",{onClick:this.choseSignInHandler,className:"here-span"},"here"))))}}]),a}(n.Component);var ce=Object(m.b)((function(e){return{userToEdit:e.userReducer.userToEdit}}),(function(e){return{accountClickedAction:function(t){return e(_(t))},signInClickedAction:function(t){return e(R(t))}}}))(re),oe=(a(84),function(e){Object(d.a)(a,e);var t=Object(p.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).saveInputValue=function(e){n.setState(Object(l.a)({},e.target.id,e.target.value))},n.closeSignInHandler=function(){n.props.signInClickedAction(!1)},n.signInHandler=function(){""===n.state.email||""===n.state.password?n.setState({error:!0}):j.a.post("https://budgetarchitect.herokuapp.com/app/v1/auth/login",{email:n.state.email,password:n.state.password}).then((function(e){console.log(e),n.setState({error:!1,userNotFound:!1}),localStorage.setItem("jwt",e.data.jwt),localStorage.setItem("name",e.data.name),localStorage.setItem("user-id",e.data.id),localStorage.setItem("income",e.data.income),localStorage.setItem("userLogged","true"),localStorage.setItem("mode","products"),n.props.signInClickedAction(!1),window.location.reload()})).catch((function(e){console.log(e),n.setState({error:!0}),500===e.response.status&&n.setState({userNotFound:!0})}))},n.closeErrorAlert=function(){n.setState({error:!1})},n.choseRegisterHandler=function(){n.props.signInClickedAction(!1),n.props.accountClickedAction(!0)},n.state={email:"",password:"",error:!1,userNotFound:!1},n}return Object(s.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"sign-in-main"},this.state.error?r.a.createElement(U,{accept:this.closeErrorAlert,text:"User not found! Please fill up every field or check your credentials!",show:!1}):null,r.a.createElement("div",{className:"sign-in-div"},r.a.createElement("h1",null,"sign in"),r.a.createElement("div",{className:"sign-in-inputs-div"},r.a.createElement(te,{saveValue:this.saveInputValue,id:"email",label:"email",placeholder:"email"}),r.a.createElement(ae,{saveValue:this.saveInputValue,id:"password",label:"password",placeholder:"password"})),r.a.createElement("div",{className:"btns-div"},r.a.createElement(f,{click:this.closeSignInHandler,content:"Close",name:"ng-btn"}),r.a.createElement(f,{click:this.signInHandler,content:"Sign In",name:"ng-btn"})),r.a.createElement("p",{className:"no-acc-p"},"To register, click",r.a.createElement("span",{onClick:this.choseRegisterHandler,className:"here-span"},"here"))))}}]),a}(n.Component));var le=Object(m.b)(null,(function(e){return{signInClickedAction:function(t){return e(R(t))},accountClickedAction:function(t){return e(_(t))}}}))(oe),ue="https://budgetarchitect.herokuapp.com/",ie=function(e){Object(d.a)(a,e);var t=Object(p.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).handleInputValue=function(e){n.setState(Object(u.a)({},n.state,{product:Object(u.a)({},n.state.product,Object(l.a)({},e.target.id,e.target.value))}))},n.saveProductHandler=function(e){var t=n.state.product,a=localStorage.getItem("user-id");e.preventDefault(),""!==t.name&&""!==t.type&&0!==t.price&&t.quantity>=1&&""!==t.date?j.a.post(ue+"app/v1/products/",{name:t.name,type:t.type,price:t.price,quantity:t.quantity,date:t.date,userID:a},{headers:{Authorization:"Bearer ".concat(localStorage.getItem("jwt"))}}).then((function(e){n.props.saveProduct(e.data),n.props.isProductSavedAction(!0),n.setState({product:{name:"",type:"",price:0,quantity:1,date:""},editClicked:!1})})).catch((function(e){console.log(e)})):n.setState({error:!0})},n.closeErrorAlert=function(){n.setState({error:!1})},n.productToEditHandler=function(e){n.props.productToEdit(e),n.setState({editClicked:!0,product:e,prodToEditID:e._id})},n.editProductHandler=function(e){var t=n.state.prodToEditID,a=n.state.product,r=localStorage.getItem("user-id");e.preventDefault(),""!==a.name&&""!==a.type&&0!==a.price&&a.quantity>=1&&""!==a.date?j.a.put(ue+"app/v1/products/".concat(t),{name:a.name,type:a.type,price:a.price,quantity:a.quantity,date:a.date,userID:r},{headers:{Authorization:"Bearer ".concat(localStorage.getItem("jwt"))}}).then((function(e){n.setState({editClicked:!1,error:!1,product:{name:"",type:"",price:0,quantity:1,date:""}}),n.props.editProduct(a)})).catch((function(e){console.log(e)})):n.setState({error:!0})},n.selectSortHandler=function(e){"products"===n.state.mode?n.props.sortProducts(e.target.value):n.props.sortGroups(e.target.value)},n.signOutHandler=function(){localStorage.clear(),window.location.reload()},n.declineSignOutHandler=function(){n.props.signOutClickedAction(!1)},n.getAllProductsHandler=function(){n.setState({isMonthSelected:!1}),j.a.get(ue+"app/v1/products/get/",{headers:{Authorization:"Bearer ".concat(localStorage.getItem("jwt"))}}).then((function(e){n.setState({selectedMonth:"default",productsLoaded:!0}),n.props.getProducts(e.data)})).catch((function(e){n.setState({productsLoaded:!1}),console.log(e)}))},n.getAllGroupsHandler=function(){j.a.get(ue+"app/v1/groups/get/",{headers:{Authorization:"Bearer ".concat(localStorage.getItem("jwt"))}}).then((function(e){n.setState({groupsLoaded:!0}),n.props.getGroupsAction(e.data)})).catch((function(e){n.setState({groupsLoaded:!1}),console.log(e)}))},n.selectFilterHandler=function(e){n.setState({isMonthSelected:!0});var t,a=n.state.selectedYear;4===e.target.value.length?(a=e.target.value,n.setState({selectedYear:e.target.value})):e.target.value.length<4&&(t=e.target.value,n.setState({selectedMonth:e.target.value})),"default"===e.target.value?(n.getAllProductsHandler(),n.getAllGroupsHandler()):"default"!==e.target.value&&n.getFilteredProductsHandler(t,a)},n.getFilteredProductsHandler=function(e,t){var a={headers:{Authorization:"Bearer ".concat(localStorage.getItem("jwt"))}},r=t,c=e;(c=parseInt(c)+1)<10&&(c="0"+c.toString());var o=new Date("".concat(Number(r),"-").concat(c,"-01 00:00:00.000")).getTime(),l=new Date("".concat(Number(r),"-").concat(c,"-31 23:59:59.000")).getTime(),u="".concat(ue,"app/v1/products/get/?date_from=").concat(o,"&date_to=").concat(l),i="".concat(ue,"app/v1/groups/get/?date_from=").concat(o,"&date_to=").concat(l),s=j.a.get(u,a),d=j.a.get(i,a);j.a.all([s,d]).then(j.a.spread((function(){var e=arguments.length<=0?void 0:arguments[0],t=arguments.length<=1?void 0:arguments[1];n.props.getProducts(e.data),n.props.getGroupsAction(t.data)}))).catch((function(e){console.log(e),401===e.response.status&&n.props.signInClickedAction(!0)}))},n.titleClickedHandler=function(){"products"===n.state.mode?n.setState({mode:"groups"}):n.setState({mode:"products"})},n.addNewGroupHandler=function(){n.setState({mode:"groups"}),n.props.addNewGroupClicked(!0)},n.seeAllHandler=function(){n.getAllProductsHandler(),n.getAllGroupsHandler()},n.state={product:{name:"",type:"",price:0,quantity:1,date:""},editClicked:!1,selectedValue:"name",error:!1,prodToEditID:"",productsLoaded:!1,groupsLoaded:!1,selectedMonth:"default",selectedYear:"2020",isMonthSelected:!1,mode:"products"},n}return Object(s.a)(a,[{key:"componentDidMount",value:function(){this.getAllProductsHandler(),this.getAllGroupsHandler()}},{key:"render",value:function(){var e,t,a="true"===localStorage.getItem("userLogged"),n=0,c=0;if(this.props.products){n=(e=this.props.products).length;for(var o=0;o<e.length;o++)e[o].quantity>=1?c+=e[o].quantity*Number(e[o].price):e[o].quantity<1&&(c+=Number(e[o].price))}var l=0,u=0;if(this.props.groups){t=this.props.groups;for(var i=0;i<t.length;i++)l+=Number(t[i].totalPrice),u+=t.length}return r.a.createElement("main",{className:"budget-calc-main"},r.a.createElement(Q,{totalPrice:c,productsLength:n,getAll:this.seeAllHandler,selectFilter:this.selectFilterHandler,selectedMonth:this.state.selectedMonth,selectedYear:this.state.selectedYear,groupsTotalPrice:l,groupsLength:this.props.groups.length,groupsProductsNumber:u,isMonthSelected:this.state.isMonthSelected,mode:this.state.mode,isUserLogged:a}),this.props.accountClicked?r.a.createElement(ce,null):null,this.props.signInClicked&&!this.props.isUserLogged?r.a.createElement(le,null):null,this.props.addNewGroupClicked?r.a.createElement(ee,null):null,this.state.error?r.a.createElement(U,{accept:this.closeErrorAlert,text:"Please fill up every field!"}):null,this.props.signOutClicked?r.a.createElement(U,{accept:this.signOutHandler,decline:this.declineSignOutHandler,text:"Your are about to sign out! Are you sure?",show:!0,title:"Signing out"}):null,a?r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"bc-titles-div"},r.a.createElement("div",{className:"bc-h1-div"},r.a.createElement("h1",{onClick:this.titleClickedHandler,className:"products"===this.state.mode?"content-title-active content-title":"content-title"},"products "),r.a.createElement("h1",{onClick:this.titleClickedHandler,className:"groups"===this.state.mode?"content-title-active content-title":"content-title"},"groups")),r.a.createElement(I,{mode:this.state.mode,deleteProducts:this.deleteProducts,selectSort:this.selectSortHandler,addNewGroupClicked:this.addNewGroupHandler})),"products"===this.state.mode?r.a.createElement(b,{handleInputValue:this.handleInputValue,product:this.state.product,editClicked:this.state.editClicked,editProduct:this.editProductHandler,saveProduct:this.saveProductHandler,types:this.state.types}):null,r.a.createElement("div",{className:"budget-calc-content-div"},"products"===this.state.mode?r.a.createElement(F,{getAllProducts:this.getAllProductsHandler,getFilteredProductsHandler:this.getFilteredProductsHandler,productsLoaded:this.state.productsLoaded,properties:this.state.properties,products:this.props.products,productToEdit:this.productToEditHandler,handleCheckboxChange:this.handleCheckboxChange,editClicked:this.state.editClicked}):r.a.createElement(J,{groupsLoaded:this.state.groupsLoaded,getAllGroups:this.getAllGroupsHandler}))):null)}}]),a}(r.a.Component);var se=Object(m.b)((function(e){return{products:e.productsReducer.products,groups:e.groupsReducer.groups,groupsProductsNumber:e.groupsReducer.groupsProductsNumber,addNewGroupClicked:e.groupsReducer.addNewGroupClicked,accountClicked:e.userReducer.accountClicked,signInClicked:e.userReducer.signInClicked,signOutClicked:e.userReducer.signOutClicked}}),(function(e){return{getProducts:function(t){return e(D(t))},getGroupsAction:function(t){return e(S(t))},saveProduct:function(t){return e({type:"SAVE_PRODUCT",payload:t})},productToEdit:function(t){return e({type:"PRODUCT_TO_EDIT",payload:t})},editProduct:function(t){return e({type:"EDIT_PRODUCT",payload:t})},sortProducts:function(t){return e(function(e){return{type:"SORT_PRODUCTS",payload:e}}(t))},sortGroups:function(t){return e(function(e){return{type:"SORT_GROUPS",payload:e}}(t))},signOutClickedAction:function(t){return e(V(t))},isProductSavedAction:function(t){return e(H(t))}}}))(ie);a(85);var de=Object(m.b)(null,(function(e){return{accountClickedAction:function(t){return e(_(t))},signInClickedAction:function(t){return e(R(t))},signOutClickedAction:function(t){return e(V(t))}}}))((function(e){var t="true"===localStorage.getItem("userLogged");return r.a.createElement("nav",{className:"header-main"},r.a.createElement("h1",{className:"header-title"},"Budget Architect"),r.a.createElement("ul",{className:"header-ul"},r.a.createElement("li",{onClick:function(){e.accountClickedAction(!0)}},t?"Account":"Register"),r.a.createElement("li",{onClick:t?function(){e.signOutClickedAction(!0)}:function(){e.signInClickedAction(!0)}},t?"Sign Out":"Sign In")))}));var pe=function(){return r.a.createElement("div",{className:"App"},r.a.createElement(de,null),r.a.createElement(se,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var me=a(12),ge={signInClicked:!1,accountClicked:!1,signOutClicked:!1,userToEdit:{}};var he=a(10),Ee={products:[],addNewGroupClicked:!1,productToEdit:{},isProductSaved:!1};var ve={addNewGroupClicked:!1,groups:[],isGroupSaved:!1,groupToEdit:{},isGroupEditClicked:!1,groupsProductsNumber:0};var fe=Object(me.b)({userReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ge,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SIGN_IN_CLICKED":return Object(u.a)({},e,{signInClicked:t.payload});case"SIGN_OUT_CLICKED":return Object(u.a)({},e,{signOutClicked:t.payload});case"ACCOUNT_CLICKED":return Object(u.a)({},e,{accountClicked:t.payload});case"EDIT_USER_INFO":return Object(u.a)({},e,{userToEdit:t.payload});default:return e}},productsReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ee,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_PRODUCTS":return Object(u.a)({},e,{products:t.payload});case"SAVE_PRODUCT":return Object(u.a)({},e,{products:[].concat(Object(he.a)(e.products),[t.payload])});case"IS_PRODUCT_SAVED":return Object(u.a)({},e,{isProductSaved:t.payload});case"PRODUCT_TO_EDIT":return Object(u.a)({},e,{productToEdit:t.payload});case"EDIT_PRODUCT":return Object(u.a)({},e,{products:e.products.map((function(e){return e._id===t.payload._id?Object(u.a)({},e,{},t.payload):e}))});case"DELETE_PRODUCT":return Object(u.a)({},e,{products:e.products.filter((function(e){return e._id!==t.payload}))});case"SORT_PRODUCTS":var a=t.payload;return Object(u.a)({},e,{products:Object(he.a)(e.products).sort((function(e,t){return e[a]>t[a]?1:t[a]>e[a]?-1:0}))});default:return e}},groupsReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ve,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_GROUPS":return Object(u.a)({},e,{groups:t.payload});case"ADD_NEW_GROUP_CLICKED":return Object(u.a)({},e,{addNewGroupClicked:t.payload});case"SAVE_GROUP":return Object(u.a)({},e,{groups:[].concat(Object(he.a)(e.groups),[t.payload])});case"IS_GROUP_SAVED":return Object(u.a)({},e,{isGroupSaved:t.payload});case"DELETE_GROUP":return Object(u.a)({},e,{groups:e.groups.filter((function(e){return e._id!==t.payload._id}))});case"SORT_GROUPS":var a=t.payload;return Object(u.a)({},e,{groups:Object(he.a)(e.groups).sort((function(e,t){return e[a]>t[a]?-1:t[a]>e[a]?1:0}))});case"GROUP_TO_EDIT":return Object(u.a)({},e,{groupToEdit:t.payload});case"EDIT_GROUP_CLICKED":return Object(u.a)({},e,{isGroupEditClicked:t.payload});case"EDIT_GROUP":return Object(u.a)({},e,{groups:e.groups.map((function(e){return e._id===t.payload._id?Object(u.a)({},e,{},t.payload):e}))});default:return e}}}),be=Object(me.c)(fe);o.a.render(r.a.createElement(m.a,{store:be},r.a.createElement(pe,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}],[[27,1,2]]]);
//# sourceMappingURL=main.7b9af84c.chunk.js.map